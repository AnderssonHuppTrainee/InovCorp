# üé® Toast (Sonner) - Configura√ß√£o e Uso

**Data:** 13 de Outubro de 2025  
**Componente:** Sonner (vue-sonner)  
**Status:** ‚úÖ Configurado e Pronto para Uso

---

## üì¶ O que foi instalado?

### Componente Sonner
- ‚úÖ `resources/js/components/ui/sonner/Sonner.vue`
- ‚úÖ `resources/js/components/ui/sonner/index.ts`
- ‚úÖ Package `vue-sonner` instalado

**Por que Sonner?**
- Toast do Shadcn Vue est√° **deprecado**
- Sonner √© a **alternativa oficial recomendada**
- Mais leve, moderno e perform√°tico
- Suporte completo a dark mode

---

## ‚öôÔ∏è Configura√ß√£o

### 1. Adicionado no Layout Principal

**Arquivo:** `resources/js/layouts/app/AppSidebarLayout.vue`

```vue
<script setup lang="ts">
import { Toaster } from '@/components/ui/sonner';
// ...
</script>

<template>
    <AppShell variant="sidebar">
        <AppSidebar />
        <AppContent variant="sidebar" class="overflow-x-hidden">
            <AppSidebarHeader :breadcrumbs="breadcrumbs" />
            <slot />
        </AppContent>
        <Toaster /> <!-- üëà Adicionado aqui -->
    </AppShell>
</template>
```

### 2. Criado Composable para Facilitar Uso

**Arquivo:** `resources/js/composables/useToast.ts`

Fun√ß√µes dispon√≠veis:
- ‚úÖ `showSuccess(message, description?)` - Notifica√ß√£o de sucesso
- ‚úÖ `showError(message, description?)` - Notifica√ß√£o de erro
- ‚úÖ `showInfo(message, description?)` - Notifica√ß√£o informativa
- ‚úÖ `showWarning(message, description?)` - Notifica√ß√£o de aviso
- ‚úÖ `showLoading(message, description?)` - Notifica√ß√£o de loading
- ‚úÖ `showPromise(promise, messages)` - Notifica√ß√£o com promessa
- ‚úÖ `dismiss(id?)` - Dismissar notifica√ß√£o espec√≠fica
- ‚úÖ `dismissAll()` - Dismissar todas

---

## üöÄ Como Usar

### 1. Importar o Composable

```typescript
import { useToast } from '@/composables/useToast'

const { showSuccess, showError, showInfo, showWarning } = useToast()
```

### 2. Exemplos de Uso

#### ‚úÖ Sucesso
```typescript
// Simples
showSuccess('Cliente criado com sucesso!')

// Com descri√ß√£o
showSuccess(
    'Cliente criado com sucesso!',
    'O cliente foi adicionado √† base de dados.'
)
```

#### ‚ùå Erro
```typescript
// Simples
showError('Erro ao eliminar fornecedor')

// Com descri√ß√£o
showError(
    'Erro ao eliminar fornecedor',
    'Este fornecedor tem encomendas associadas.'
)
```

#### ‚ÑπÔ∏è Informa√ß√£o
```typescript
showInfo('A processar encomenda...')

showInfo(
    'Ficheiro enviado',
    'O ficheiro est√° a ser processado em segundo plano.'
)
```

#### ‚ö†Ô∏è Aviso
```typescript
showWarning('Aten√ß√£o: Esta a√ß√£o n√£o pode ser revertida')

showWarning(
    'Stock baixo',
    'O artigo "Cadeira Escrit√≥rio" tem apenas 3 unidades.'
)
```

#### ‚è≥ Loading
```typescript
// Mostrar loading
const loadingId = showLoading('A carregar dados...')

// Depois dismissar
dismiss(loadingId)
```

#### üîÑ Com Promessa (Recomendado para opera√ß√µes ass√≠ncronas)
```typescript
const promise = axios.post('/api/orders', data)

showPromise(promise, {
    loading: 'A criar encomenda...',
    success: 'Encomenda criada com sucesso!',
    error: 'Erro ao criar encomenda'
})

// Com fun√ß√µes din√¢micas
showPromise(promise, {
    loading: 'A processar...',
    success: (data) => `Encomenda #${data.number} criada!`,
    error: (err) => `Erro: ${err.message}`
})
```

---

## üí° Exemplos de Integra√ß√£o em CRUD

### Exemplo 1: Create Entity

```typescript
// resources/js/pages/entities/Create.vue
import { useToast } from '@/composables/useToast'

const { showSuccess, showError } = useToast()

const submitForm = form.handleSubmit(async (values) => {
    try {
        await router.post(route('entities.store', { type: props.type }), values, {
            onSuccess: () => {
                showSuccess(
                    `${type === 'client' ? 'Cliente' : 'Fornecedor'} criado com sucesso!`,
                    'Pode agora adicionar contactos e encomendas.'
                )
            },
            onError: (errors) => {
                showError(
                    `Erro ao criar ${type === 'client' ? 'cliente' : 'fornecedor'}`,
                    Object.values(errors).join(', ')
                )
            }
        })
    } catch (error) {
        showError('Erro inesperado', error.message)
    }
})
```

### Exemplo 2: Delete Order

```typescript
// resources/js/pages/orders/Index.vue
import { useToast } from '@/composables/useToast'

const { showSuccess, showError, showWarning } = useToast()

const handleDelete = (id: number) => {
    showWarning(
        'Tem certeza?',
        'Esta a√ß√£o eliminar√° a encomenda permanentemente.'
    )
    
    // Usar confirma√ß√£o do browser
    if (confirm('Confirma a elimina√ß√£o?')) {
        router.delete(route('orders.destroy', id), {
            onSuccess: () => {
                showSuccess('Encomenda eliminada com sucesso!')
            },
            onError: () => {
                showError('Erro ao eliminar encomenda')
            }
        })
    }
}
```

### Exemplo 3: Update com Promise

```typescript
// resources/js/pages/proposals/Edit.vue
import { useToast } from '@/composables/useToast'

const { showPromise } = useToast()

const submitForm = form.handleSubmit(async (values) => {
    const updatePromise = new Promise((resolve, reject) => {
        router.put(route('proposals.update', props.proposal.id), values, {
            onSuccess: () => resolve(values),
            onError: () => reject(new Error('Falha ao atualizar'))
        })
    })

    showPromise(updatePromise, {
        loading: 'A atualizar proposta...',
        success: 'Proposta atualizada com sucesso!',
        error: 'Erro ao atualizar proposta'
    })
})
```

### Exemplo 4: Valida√ß√£o VIES

```typescript
// resources/js/composables/useViesValidation.ts
import { useToast } from '@/composables/useToast'

const { showSuccess, showError, showLoading, dismiss } = useToast()

const validateVat = async () => {
    const loadingId = showLoading('A validar NIF no VIES...')
    
    try {
        const response = await axios.post('/api/vies-check', {
            vat_number: taxNumber
        })
        
        dismiss(loadingId)
        
        if (response.data.valid) {
            showSuccess(
                'NIF v√°lido!',
                `Empresa: ${response.data.name}`
            )
        } else {
            showError('NIF inv√°lido', 'Verifique o n√∫mero inserido.')
        }
    } catch (error) {
        dismiss(loadingId)
        showError('Erro ao validar NIF', 'Servi√ßo VIES indispon√≠vel.')
    }
}
```

---

## üé® Personaliza√ß√£o

### Dura√ß√£o das Notifica√ß√µes

Valores padr√£o configurados:
```typescript
showSuccess() // 4 segundos
showError()   // 5 segundos (mais tempo para ler)
showInfo()    // 4 segundos
showWarning() // 4 segundos
showLoading() // Infinito (at√© dismissar)
```

Para customizar:
```typescript
import { toast } from 'vue-sonner'

toast.success('Mensagem', {
    duration: 10000, // 10 segundos
})
```

### Posi√ß√£o

Padr√£o: `top-right`

Para mudar globalmente:
```vue
<!-- AppSidebarLayout.vue -->
<Toaster position="bottom-right" />
```

Posi√ß√µes dispon√≠veis:
- `top-left`
- `top-center`
- `top-right` (padr√£o)
- `bottom-left`
- `bottom-center`
- `bottom-right`

### Rich Content

```typescript
toast('Encomenda #000026', {
    description: 'Cliente: IKEA Portugal',
    action: {
        label: 'Ver',
        onClick: () => router.visit('/orders/26')
    },
})
```

---

## üéØ Casos de Uso Comuns

### 1. Feedback de Formul√°rios
```typescript
// Ap√≥s criar/editar
showSuccess('Dados salvos com sucesso!')

// Erro de valida√ß√£o
showError('Preencha todos os campos obrigat√≥rios')
```

### 2. Opera√ß√µes Ass√≠ncronas
```typescript
const promise = fetchData()

showPromise(promise, {
    loading: 'A carregar...',
    success: 'Dados carregados!',
    error: 'Falha ao carregar'
})
```

### 3. Confirma√ß√µes
```typescript
// Antes de eliminar
showWarning('Tem certeza que deseja eliminar?')

// Ap√≥s eliminar
showSuccess('Item eliminado com sucesso!')
```

### 4. Uploads
```typescript
showLoading('A enviar ficheiro...')
// ...upload...
dismiss() // ou showSuccess()
```

### 5. Valida√ß√µes
```typescript
// NIF v√°lido
showSuccess('NIF v√°lido!', 'Empresa: IKEA Portugal')

// NIF inv√°lido
showError('NIF inv√°lido', 'Verifique o n√∫mero inserido')
```

---

## üìä Substituindo Flash Messages

### ANTES (Laravel Flash Messages)
```php
// Backend
return redirect()->with('success', 'Cliente criado!');
```

```vue
<!-- Frontend - N√£o havia feedback visual! -->
```

### DEPOIS (Com Sonner)
```typescript
// Frontend
router.post(route, data, {
    onSuccess: () => {
        showSuccess('Cliente criado com sucesso!')
    }
})
```

---

## üé® Tipos de Toast Dispon√≠veis

| Fun√ß√£o | Cor | √çcone | Uso |
|--------|-----|-------|-----|
| `showSuccess()` | Verde ‚úÖ | Checkmark | A√ß√µes bem-sucedidas |
| `showError()` | Vermelho ‚ùå | X | Erros e falhas |
| `showInfo()` | Azul ‚ÑπÔ∏è | Info | Informa√ß√µes gerais |
| `showWarning()` | Laranja ‚ö†Ô∏è | Warning | Avisos importantes |
| `showLoading()` | Cinza ‚è≥ | Spinner | Opera√ß√µes em andamento |
| `showPromise()` | Din√¢mico üîÑ | Din√¢mico | Opera√ß√µes ass√≠ncronas |

---

## ‚úÖ Checklist de Integra√ß√£o

### J√° Configurado
- [x] Sonner instalado via Shadcn CLI
- [x] Toaster adicionado ao AppSidebarLayout
- [x] Composable `useToast` criado
- [x] Documenta√ß√£o criada

### Pr√≥ximos Passos (Opcional)
- [ ] Integrar em todas as p√°ginas Create/Edit
- [ ] Substituir `console.log` por toasts
- [ ] Adicionar toasts em valida√ß√µes VIES
- [ ] Adicionar toasts em opera√ß√µes de delete
- [ ] Adicionar toasts em uploads de arquivos

---

## üß™ Teste R√°pido

### No Browser Console:
```javascript
// Importar globalmente (apenas para teste)
import { toast } from 'vue-sonner'

// Testar
toast.success('Teste de sucesso!')
toast.error('Teste de erro!')
toast.info('Teste de info!')
toast.warning('Teste de aviso!')
```

### Em Qualquer Componente:
```vue
<script setup lang="ts">
import { useToast } from '@/composables/useToast'

const { showSuccess } = useToast()

// Testar ao clicar em bot√£o
const handleTest = () => {
    showSuccess('Toast funcionando!', 'Sistema configurado corretamente.')
}
</script>

<template>
    <Button @click="handleTest">Testar Toast</Button>
</template>
```

---

## üí° Boas Pr√°ticas

### ‚úÖ FAZER:
```typescript
// Mensagens claras e acion√°veis
showSuccess('Cliente criado com sucesso!')

// Fornecer contexto quando √∫til
showError('Erro ao eliminar fornecedor', 'Este fornecedor tem encomendas associadas.')

// Usar promises para opera√ß√µes ass√≠ncronas
showPromise(saveData(), {
    loading: 'A guardar...',
    success: 'Guardado!',
    error: 'Erro ao guardar'
})
```

### ‚ùå N√ÉO FAZER:
```typescript
// Mensagens gen√©ricas demais
showError('Erro') // ‚ùå N√£o informa o usu√°rio

// Toast para cada detalhe
showInfo('Campo preenchido') // ‚ùå Spam de notifica√ß√µes

// N√£o usar para valida√ß√µes de formul√°rio
showError('Nome √© obrigat√≥rio') // ‚ùå Usar FormMessage do vee-validate
```

---

## üé® Customiza√ß√£o Avan√ßada

### Toast com A√ß√£o
```typescript
import { toast } from 'vue-sonner'

toast('Encomenda criada!', {
    description: 'Encomenda #000026',
    action: {
        label: 'Ver',
        onClick: () => router.visit('/orders/26')
    },
})
```

### Toast com Dismissal Manual
```typescript
const toastId = toast('Opera√ß√£o em progresso...', {
    duration: Infinity, // N√£o fecha automaticamente
})

// Depois de concluir
toast.dismiss(toastId)
toast.success('Conclu√≠do!')
```

### Toast Customizado
```typescript
toast('Mensagem customizada', {
    duration: 10000,
    position: 'bottom-center',
    style: {
        background: 'linear-gradient(to right, #00b09b, #96c93d)',
    },
    className: 'custom-toast',
})
```

---

## üìä Quando Usar Toast vs Form Validation

### Use Toast Para:
‚úÖ Feedback de a√ß√µes (criar, editar, eliminar)  
‚úÖ Opera√ß√µes ass√≠ncronas (upload, API calls)  
‚úÖ Mensagens de sistema (conex√£o perdida, etc.)  
‚úÖ Confirma√ß√µes de sucesso  
‚úÖ Erros globais da aplica√ß√£o

### Use Form Validation Para:
‚úÖ Erros de valida√ß√£o de campos  
‚úÖ Campos obrigat√≥rios  
‚úÖ Formatos inv√°lidos  
‚úÖ Feedback inline no formul√°rio

**Regra geral:**
- **Toast** = Feedback de **a√ß√µes/opera√ß√µes**
- **FormMessage** = Feedback de **valida√ß√£o de campos**

---

## üîß Integra√ß√£o com Inertia.js

### Exemplo Completo

```typescript
import { router } from '@inertiajs/vue3'
import { useToast } from '@/composables/useToast'

const { showSuccess, showError, showLoading, dismiss } = useToast()

const handleSubmit = async (values) => {
    const loadingId = showLoading('A criar cliente...')
    
    router.post(route('entities.store'), values, {
        onSuccess: () => {
            dismiss(loadingId)
            showSuccess(
                'Cliente criado com sucesso!',
                'Pode agora adicionar contactos.'
            )
        },
        onError: (errors) => {
            dismiss(loadingId)
            showError(
                'Erro ao criar cliente',
                Object.values(errors).join(', ')
            )
        }
    })
}
```

---

## üåà Visual do Toast

### Light Mode
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úÖ Cliente criado com sucesso!      ‚îÇ
‚îÇ O cliente foi adicionado.          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Dark Mode
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úÖ Cliente criado com sucesso!      ‚îÇ
‚îÇ O cliente foi adicionado.          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
(Fundo escuro, texto claro)
```

---

## üìù TODO: Integra√ß√£o em P√°ginas Existentes

### Prioridade Alta
- [ ] Integrar em entities/Create.vue e Edit.vue
- [ ] Integrar em orders/Create.vue e Edit.vue
- [ ] Integrar em proposals/Create.vue e Edit.vue
- [ ] Integrar em work-orders/Create.vue e Edit.vue
- [ ] Integrar em valida√ß√£o VIES (useViesValidation.ts)

### Prioridade M√©dia
- [ ] Integrar em todas as p√°ginas de settings
- [ ] Integrar em digital-archive uploads
- [ ] Integrar em financial transactions

### Prioridade Baixa
- [ ] Substituir console.log por toasts onde apropriado
- [ ] Adicionar toasts em erros de API
- [ ] Toasts em opera√ß√µes de sincroniza√ß√£o

---

## üéâ Resultado Final

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë         ‚úÖ TOAST (SONNER) CONFIGURADO!               ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë                                                        ‚ïë
‚ïë  Componente:  Sonner (vue-sonner)                     ‚ïë
‚ïë  Status:      ‚úÖ Instalado e Configurado              ‚ïë
‚ïë  Localiza√ß√£o: AppSidebarLayout.vue                    ‚ïë
‚ïë                                                        ‚ïë
‚ïë  Funcionalidades:                                      ‚ïë
‚ïë    ‚úÖ showSuccess()   - Notifica√ß√µes de sucesso       ‚ïë
‚ïë    ‚úÖ showError()     - Notifica√ß√µes de erro          ‚ïë
‚ïë    ‚úÖ showInfo()      - Notifica√ß√µes informativas     ‚ïë
‚ïë    ‚úÖ showWarning()   - Notifica√ß√µes de aviso         ‚ïë
‚ïë    ‚úÖ showLoading()   - Notifica√ß√µes de loading       ‚ïë
‚ïë    ‚úÖ showPromise()   - Notifica√ß√µes com promessas    ‚ïë
‚ïë                                                        ‚ïë
‚ïë  Composable:  useToast()                              ‚ïë
‚ïë  Docs:        TOAST_SETUP.md (500+ linhas)            ‚ïë
‚ïë                                                        ‚ïë
‚ïë  Pronto para usar em TODA a aplica√ß√£o! üéä            ‚ïë
‚ïë                                                        ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

**Status:** ‚úÖ **PRONTO PARA USO!**  
**Documenta√ß√£o:** 500+ linhas com exemplos completos  
**Pr√≥ximo Passo:** Integrar nas p√°ginas CRUD

üöÄ **Use `showSuccess()`, `showError()`, etc. em qualquer componente!**

